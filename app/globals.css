@tailwind base;
@tailwind components;
@tailwind utilities;

/* Google Fonts Import - EB Garamond for body text, Cinzel for display */
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600;700&family=EB+Garamond:ital,wght@0,400;0,500;0,600;1,400;1,500&display=swap');

/* Base Styles */
@layer base {
  * {
    @apply box-border m-0 p-0;
  }

  html {
    font-size: 16px;
    scroll-behavior: smooth;
  }

  body {
    @apply font-body text-text-primary leading-relaxed min-h-screen overflow-x-hidden;
    background: #0a0a0a;
    background-image:
      radial-gradient(circle at 50% 0%, #1f1f1f 0%, transparent 70%),
      linear-gradient(to bottom, transparent, #000000);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }

  h1, h2, h3, h4, h5, h6 {
    @apply font-display font-bold leading-tight uppercase tracking-wider;
    color: #c9a227;
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.8);
  }

  h1 {
    @apply text-4xl border-b-2 border-border-gold inline-block pb-2 mb-8;
  }

  h2 {
    @apply text-3xl;
  }

  h3 {
    @apply text-2xl;
  }

  h4 {
    @apply text-xl text-text-primary;
  }

  h5 {
    @apply text-lg;
  }

  h6 {
    @apply text-base;
  }

  p {
    @apply text-text-secondary mb-4;
    font-size: 1.1rem;
  }

  a {
    @apply text-accent-primary no-underline transition-all duration-150 border-b border-transparent;
  }

  a:hover {
    @apply text-accent-secondary border-b-accent-secondary;
    text-shadow: 0 0 8px rgba(138, 28, 28, 0.5);
  }
}

/* Component Styles */
@layer components {
  /* Buttons */
  .btn {
    @apply inline-flex items-center justify-center gap-2 px-5 py-3 font-display text-sm font-semibold tracking-wider rounded-sm border cursor-pointer transition-all duration-300 uppercase relative overflow-hidden;
  }

  .btn-primary {
    @apply text-accent-primary border-accent-primary;
    background: linear-gradient(to bottom, #2c2c2c, #1a1a1a);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.5);
  }

  .btn-primary:hover {
    background: linear-gradient(to bottom, #3c3c3c, #2a2a2a);
    box-shadow: 0 0 15px rgba(201, 162, 39, 0.4);
    transform: translateY(-1px);
  }

  .btn-primary:active {
    transform: translateY(1px);
  }

  .btn-secondary {
    @apply bg-transparent text-text-primary border-border;
  }

  .btn-secondary:hover {
    @apply border-text-primary bg-white/5;
  }

  .btn-ghost {
    @apply bg-transparent text-text-secondary border-transparent;
  }

  .btn-ghost:hover {
    @apply text-text-primary;
    text-shadow: 0 0 8px rgba(255, 255, 255, 0.3);
  }

  /* Cards - Metal Plate Style */
  .card {
    @apply rounded-sm p-6 border border-border transition-all duration-300;
    background: linear-gradient(135deg, #1a1a1a 0%, #141414 100%);
    border-top-color: #6a6a6a;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5), inset 0 0 0 1px rgba(255, 255, 255, 0.05);
  }

  .card:hover {
    @apply border-border-light;
    transform: translateY(-2px);
    box-shadow: 0 15px 40px rgba(0, 0, 0, 0.6), inset 0 0 0 1px rgba(255, 255, 255, 0.1);
  }

  /* Glass effect - Dark Mist */
  .glass {
    @apply border border-border;
    background: rgba(10, 10, 10, 0.85);
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.5);
  }

  /* Input Fields */
  .input {
    @apply w-full px-4 py-3 font-body text-base text-text-primary rounded-sm border border-border transition-all duration-300;
    background: rgba(0, 0, 0, 0.3);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5);
  }

  .input:focus {
    @apply outline-none border-accent-primary;
    background: rgba(0, 0, 0, 0.5);
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.5), 0 0 0 1px #c9a227;
  }

  .input::placeholder {
    @apply text-text-muted italic;
  }

  /* Badges */
  .badge {
    @apply inline-flex items-center px-2 py-1 text-xs font-medium rounded-full uppercase tracking-wider;
  }

  .badge-alive {
    @apply bg-status-alive/20 text-status-alive;
  }

  .badge-deceased {
    @apply bg-status-deceased/20 text-status-deceased;
  }

  .badge-imprisoned {
    @apply bg-status-imprisoned/20 text-status-imprisoned;
  }

  .badge-unknown {
    @apply bg-status-unknown/20 text-status-unknown;
  }

  /* Side Panel */
  .side-panel {
    @apply w-96 bg-bg-secondary border-l border-border overflow-y-auto;
  }

  /* Tree Node Styles */
  .tree-node {
    @apply cursor-pointer transition-all duration-300;
  }

  .tree-node:hover {
    filter: brightness(1.2);
  }

  .tree-node.selected {
    filter: drop-shadow(0 0 10px #c9a227);
  }

  .tree-edge {
    fill: none;
    stroke-width: 2;
    @apply transition-all duration-300;
  }

  .tree-edge.blood {
    stroke: #c9a227;
  }

  .tree-edge.marriage {
    stroke: #8a1c1c;
    stroke-dasharray: 8, 4;
  }

  .tree-edge.secret {
    stroke: #5a5a5a;
    stroke-dasharray: 4, 4;
    opacity: 0.7;
  }

  .tree-edge.betrothed {
    stroke: #d35400;
    stroke-dasharray: 2, 4;
  }

  .tree-edge.highlighted {
    stroke-width: 4;
    filter: drop-shadow(0 0 4px currentColor);
  }

  /* GoT Atmosphere Background */
  .got-atmosphere {
    @apply pointer-events-none overflow-hidden;
    background:
      radial-gradient(120% 80% at 50% -10%, rgba(201, 162, 39, 0.14) 0%, rgba(10, 10, 10, 0) 60%),
      linear-gradient(180deg, #0f0f10 0%, #090909 55%, #050505 100%);
  }

  .got-atmosphere-steel,
  .got-atmosphere-fog,
  .got-atmosphere-embers,
  .got-atmosphere-vignette {
    @apply absolute inset-0;
  }

  .got-atmosphere-steel {
    background:
      linear-gradient(120deg, rgba(255, 255, 255, 0.035) 0%, rgba(255, 255, 255, 0) 40%),
      linear-gradient(300deg, rgba(201, 162, 39, 0.11) 0%, rgba(201, 162, 39, 0) 45%);
    background-size: 160% 160%;
    animation: steelDrift 18s ease-in-out infinite alternate;
  }

  .got-atmosphere-fog {
    background:
      radial-gradient(circle at 20% 30%, rgba(60, 60, 60, 0.34) 0%, rgba(60, 60, 60, 0) 45%),
      radial-gradient(circle at 78% 68%, rgba(42, 42, 42, 0.36) 0%, rgba(42, 42, 42, 0) 42%);
    filter: blur(2px);
    animation: fogDrift 24s linear infinite;
    transform: scale(1.08);
  }

  .got-atmosphere-embers {
    background-image:
      radial-gradient(circle, rgba(201, 162, 39, 0.5) 1px, rgba(201, 162, 39, 0) 1.65px),
      radial-gradient(circle, rgba(138, 28, 28, 0.38) 1.1px, rgba(138, 28, 28, 0) 1.9px);
    background-size: 150px 150px, 220px 220px;
    background-position: 0 0, 60px 30px;
    opacity: 0.42;
    animation: emberRise 26s linear infinite;
  }

  .got-atmosphere-vignette {
    background: radial-gradient(circle at center, rgba(0, 0, 0, 0.08) 32%, rgba(0, 0, 0, 0.74) 100%);
  }
}

@keyframes steelDrift {
  0% {
    transform: translate3d(-1.5%, -1%, 0) scale(1.02);
  }
  100% {
    transform: translate3d(1.5%, 1%, 0) scale(1.05);
  }
}

@keyframes fogDrift {
  0% {
    transform: translateX(-2%) translateY(0) scale(1.08);
  }
  50% {
    transform: translateX(1.5%) translateY(-1.5%) scale(1.1);
  }
  100% {
    transform: translateX(-2%) translateY(0) scale(1.08);
  }
}

@keyframes emberRise {
  0% {
    transform: translateY(0);
  }
  100% {
    transform: translateY(-140px);
  }
}

@media (prefers-reduced-motion: reduce) {
  .got-atmosphere-steel,
  .got-atmosphere-fog,
  .got-atmosphere-embers {
    animation: none;
  }
}

/* Scrollbar - Iron Look */
::-webkit-scrollbar {
  width: 10px;
  height: 10px;
}

::-webkit-scrollbar-track {
  background: #0f0f0f;
  border-left: 1px solid #1f1f1f;
}

::-webkit-scrollbar-thumb {
  background: #333;
  border: 1px solid #444;
  border-radius: 0;
}

::-webkit-scrollbar-thumb:hover {
  background: #444;
  border-color: #555;
}

/* Responsive */
@media (max-width: 1024px) {
  .side-panel {
    @apply fixed right-0 top-0 bottom-0 z-modal translate-x-full transition-transform duration-300;
  }

  .side-panel.open {
    @apply translate-x-0;
  }
}

@media (max-width: 768px) {
  .side-panel {
    @apply w-full top-auto h-[60vh] translate-y-full translate-x-0 border-l-0 border-t border-border rounded-t-xl;
  }

  .side-panel.open {
    @apply translate-y-0;
  }
}
